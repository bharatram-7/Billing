{% extends 'mainbase.html' %}

{% block head %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/menu.css' %}">
{% endblock head %}

{% block title %}
Menu
{% endblock title %}

{% block body %}
<script src="bootstrap-input-spinner-js"></script>
<div class="container-fluid h-100">
    <div class="row justify-content-between my-header">
        <div class="col-md-1 align-self-center">Logo</div>
        <div class="col-md-4">
            <div class="row align-items-center h-100">
                <div class="col-md-4">Welcome, {{ name }}</div>
                <div class="col">
                    <a href="/customer/checkout">Cart</a>
                </div>
                <div class="col">
                    <a href="/customer/orders">Orders</a>
                </div>
                <div class="col">
                    <a href="/logout">Logout</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row h-100" id="app">
        <div class="col-md-3 menu-side">
            <div v-for="menu in menus">
                <a v-bind:href="'#'+menu.name">[[ menu.name ]]</a>
            </div>
        </div>
        <div class="col-md-6 main-content">
            <div v-for="menu in menus">
                <h2 :id="menu.name">[[ menu.name ]]</h2>
                <div v-for="item in menu.items">
                    <div class="card mb-3" style="max-width: 740px;">
                      <div class="row no-gutters">
                        <div class="col-md-3">
                            <div v-if="item.image">
                                <img :src="item.image" class="card-img" alt="Food">
                            </div>
                            <div v-else>
                                No image available
                            </div>
                        </div>
                        <div class="col-md-6">
                          <div class="card-body">
                            <h5 class="card-title">[[ item.name ]]</h5>
                            <p class="card-text">[[ item.description ]]</p>
                          </div>
                        </div>
                        <div class="col-md-3 align-self-center">
                            <inc-dec></inc-dec>
                        </div>
                      </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">Cart</div>
    </div>
</div>

<script>
    Vue.component('inc-dec', {
    data: function(){
        return{
            count: 0
        }
    },
    template: `<div class="input-group quantity">
                           <div v-on:click="count++" class="input-group-prepend decrement-btn" style="cursor: pointer">
                                    <span v-on:click="count++" class="input-group-text">-</span>
                                </div>
                                <input type="text" style="width:50px" class="qty-input form-control" maxlength="2" max="10" value="1">
                                <div class="input-group-append increment-btn" style="cursor: pointer">
                                    <span class="input-group-text">+</span>
                                </div>
                            </div>`
    });

    var app = new Vue({
        delimiters: ['[[',']]'],
        el: '#app',
        data: {
            menus: null
        },
        mounted: function() {
            axios.get("{% url 'active_menu_items' %}")
            .then(response => (this.menus = response.data))
            .catch(function(error){
                console.log(error)
            })
        }
    });
</script>
{% endblock body %}